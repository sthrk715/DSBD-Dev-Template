# データソース仕様書

## データソース一覧

| # | データソース名 | 種別 | 取得方法 | 更新頻度 | 機密レベル |
|---|--------------|------|---------|---------|-----------|
| DS-001 | [TODO: 例）売上データ] | BigQuery | 直接クエリ | 日次バッチ | 社外秘 |
| DS-002 | [TODO: 例）ユーザー情報] | Cloud SQL | Prisma ORM | リアルタイム | 個人情報含む |
| DS-003 | [TODO: 例）外部広告API] | 外部API | REST API | 1時間ごと | 社外秘 |
| [TODO] | [TODO] | [TODO] | [TODO] | [TODO] | [TODO] |

## スキーマ概要

### DS-001: [TODO: データソース名]

| カラム名 | 型 | 説明 | NULL許容 |
|---------|---|------|---------|
| [TODO: id] | STRING | [TODO: 一意識別子] | NO |
| [TODO: date] | DATE | [TODO: 対象日] | NO |
| [TODO: amount] | NUMERIC | [TODO: 金額] | NO |
| [TODO: category] | STRING | [TODO: カテゴリ] | YES |

- レコード数規模: [TODO: 約100万行/月]
- パーティション: [TODO: date カラムで日付パーティション]
- クラスタリング: [TODO: category]

### DS-002: [TODO: データソース名]

| カラム名 | 型 | 説明 | NULL許容 |
|---------|---|------|---------|
| [TODO] | [TODO] | [TODO] | [TODO] |

## データ取得方法

| データソース | 方式 | 詳細 |
|------------|------|------|
| BigQuery | 直接クエリ | @google-cloud/bigquery クライアント経由 |
| Cloud SQL | Prisma ORM | PostgreSQL接続 |
| 外部API | REST API | [TODO: APIエンドポイント、認証方式] |

## データ鮮度要件

| データソース | 鮮度要件 | 許容遅延 |
|------------|---------|---------|
| [TODO: リアルタイム表示が必要なデータ] | ニアリアルタイム | 5分以内 |
| [TODO: 日次集計データ] | 日次バッチ | 翌朝9時まで |
| [TODO: 月次レポートデータ] | 月次バッチ | 翌月1日まで |

## データ量見込み

| データソース | 現在のデータ量 | 月間増加量 | 1年後予測 |
|------------|-------------|-----------|----------|
| [TODO] | [TODO: 10GB] | [TODO: 1GB/月] | [TODO: 22GB] |

**BigQuery課金への影響:**
- 月間スキャン量見込み: [TODO: TB]
- 月間コスト概算: [TODO: $]

## 機密データの有無とマスキング要件

| データ種別 | 機密レベル | マスキング | 対応 |
|-----------|----------|----------|------|
| 個人名 | 個人情報 | 要 | ハッシュ化 or イニシャル表示 |
| メールアドレス | 個人情報 | 要 | 部分マスク (a***@example.com) |
| 電話番号 | 個人情報 | 要 | 部分マスク |
| 売上金額 | 社外秘 | 不要 | アクセス制御で対応 |
| [TODO] | [TODO] | [TODO] | [TODO] |
